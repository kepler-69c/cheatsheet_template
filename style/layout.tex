%% style/layout.tex %%

% compact mode
\ifcompactmode
    % remove itemize/enumerate margin, make vertical space shorter
    \setlength{\jot}{1pt}
    \setlist[enumerate]{leftmargin=*, itemsep=0em}
    \setlist[itemize]{leftmargin=*, itemsep=0em}
\else
    % normal spacing can remain default
\fi

% fonts
\usepackage[sfdefault]{FiraSans}
\usepackage{mathpazo}
\renewcommand{\rmdefault}{put}

% titles
\usepackage[explicit]{titlesec}

\titleformat{\section}[display]
{\large\bfseries}{}{0pt}{%
\begin{tcolorbox}[arc=0pt,boxsep=0pt,boxrule=0pt,left=6pt,right=6pt,top=3pt,bottom=3pt,middle=0pt,nobeforeafter,colback=cyan!50!blue]\color{white}#1\end{tcolorbox}}

\titleformat{\subsection}[display]
{\large\bfseries}{}{0pt}{%
\begin{tcolorbox}[arc=0pt,boxsep=0pt,boxrule=0pt,left=6pt,right=6pt,top=2pt,bottom=2pt,middle=0pt,nobeforeafter,colback=cyan!20]#1\end{tcolorbox}}

\titleformat{\subsubsection}[display]
{\normalsize\bfseries}{}{0pt}{%
\begin{tcolorbox}[arc=0pt,boxsep=0pt,boxrule=0pt,left=6pt,right=6pt,top=2pt,bottom=2pt,middle=0pt,nobeforeafter,colback=cyan!10]#1\end{tcolorbox}}

\titlespacing{\section}{0pt}{5pt}{0pt}
\titlespacing{\subsection}{0pt}{0pt}{0pt}
\titlespacing{\subsubsection}{0pt}{0pt}{0pt}

% font shrink
\renewcommand{\large}{\normalsize}
\renewcommand{\small}{\normalsize}

% header/footer
\usepackage{fancyhdr,lastpage}
\pagestyle{fancy}
\fancyhf{}
\lhead{%
  \textbf{\subject} - \semester%
  \ifx\author\empty\else - \textbf{\author}\fi
}
\rhead{page \thepage /\pageref*{LastPage}}

% for colors:
% see https://en.wikibooks.org/wiki/LaTeX/Colors#The_68_standard_colors_known_to_dvips

% custom environments
\NewDocumentEnvironment{recipe}{o}
{
  \begin{tcolorbox}[
    colback=white,
    colframe=YellowGreen!75!black,
    boxsep=2pt,left=2pt,right=2pt,top=2pt,bottom=2pt,
    sharp corners,
    title={\includegraphics[height=5pt]{img/icons/cooking-pot.png}\hspace{4pt}#1}
  ]
}
{
  \end{tcolorbox}
}

\newcommand{\warning}[1]{%
\begin{tcolorbox}[
  enhanced,
  colframe=YellowOrange!75!black,
  colbacktitle=YellowOrange!75!black,
  titlerule=0pt,
  attach boxed title to top,
  sharp corners,
  boxed title style={sharp corners},
  frame hidden=true,
  interior hidden=false,
  lowerbox=ignored,
  top=-\baselineskip,
  title={#1},
  before upper=\tcblower,
  left=2pt,toprule=0pt,bottomrule=0pt
]
\end{tcolorbox}}
